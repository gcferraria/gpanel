(function(j){var l=my.Class({attach:function(D,C){if(C!==undefined){h.call(this,C,0,D);return D}else{return v.call(this,D)}},dettach:function(D){if(D===undefined){return x.call(this)}var C=a.call(this,D);if(C!==undefined){return h.call(this,C,1).pop()}},toArray:function(){return f.call(this)},length:0}),B=my.Class(l,{constructor:function(C){this.parent=C;return B.Super.call(this)},attach:function(E){var F=new t.$(E);F.removeClass("template");F.remove();var G=F.attr("data-jsb-clone");if(G){var D=z.call(this,G);E=D.clone();F=new t.$(E)}var C=i(F);if(C!==undefined){this["$"+C]=F}return B.Super.prototype.attach.call(this,F)},dettach:function(D){var E=B.Super.prototype.dettach.call(this,D);if(E===undefined){return}var C=i(E);E.remove();if(C!==undefined){var F="$"+C;delete this[F]}E=null},destructor:function(){while(this.length){this.dettach()}this.parent=null}});var A=my.Class({push:function(C){return v.call(this,C)},execute:function(){while(queued=k.call(this)){switch(typeof queued){case"function":queued();break;default:}}},length:0}),m={},b=[],n={},t=my.Class(l,{STATIC:{"$":function(C){return new jQuery(C)},byGuid:function(C){if(C===undefined){return false}return b[C]},byClass:function(C){if(C===undefined){return[]}var D=n[C]||[];return D.slice(0)},object:function(D,C){if(!D){return false}if(D==="JsB"){return t}if(typeof C==="function"&&C.constructor){m[D]=C}return m[D]}},constructor:function(D,C){this.caller=C;this.$=t.$(D);s.call(this);u.call(this);this.template=new B(this);this.queue=new A(this);p.call(this,this.$);this.queue.execute();if(!this.template.length){delete this.template}delete this.queue;this.select.toggle=g;this.deselect.toggle=g;return true},attach:function(D,C,I){var H=new t.$(D);if(H.hasClass("template")){return this.template.attach(H)}var J=H.attr("data-jsb-clone");if(J){var F=z.call(this,J);D=F.clone();H.remove();H=new t.$(D);this.$.append(H)}var G=H.attr("data-jsb-class")||"JsB";var E=t.object(G);if(E==undefined){throw'Class "'+G+'" not found!';return}var F=new E(H,this);if(!(F instanceof t)){return null}if(F.name===undefined){F.name=C||i(H)}F.className=G;F.guid=b.length;b.push(F);if(n[G]===undefined){n[G]=[]}n[G].push(F);if(!F.isTransparent){if(F.name!==undefined){F.parent["$"+F.name]=F}t.Super.prototype.attach.call(F.parent,F,I)}var K=H.attr("data-jsb-context");if(K){F.contextName=K;F.context[K]=F}return F},bind:function(C,D){D=D||this[C];var E=this;this.$.bind(C,function(G,F){return D.call(E,G,F)})},clone:function(){var C=this.$.clone();return new this.constructor(C,this.caller)},deselect:function(C){switch(C){case false:case undefined:this.$.removeClass("selected");return this;case true:children=this.selected(true);while(C=children.shift()){C.deselect()}return C;default:C=d.call(this,C);if(C!==false){return C.deselect()}return C}},destructor:function(){while(this.length){this.dettach()}var F=a.call(b,this);if(F>=0){b[F]=null;b.splice(F,1)}var E=n[this.className];var C=a.call(E,this);if(C>=0){E[C]=null;E.splice(C,1)}this.$.remove();this.$=null;this.caller=null;this.context=null;this.parent=null;this.root=null;var D=this.template;if(D){D.destructor()}this.template=null},dettach:function(E){var D=t.Super.prototype.dettach.call(this,E);if(D===undefined){return}if(D.name!==undefined){delete this["$"+D.name]}var C=$.attr("data-jsb-context");if(C){this.contextName=C;D.context[C]=this}if(D.contextName){delete D.context[D.contextName]}D.destructor();D=null},empty:function(){while(this.length){this.dettach()}this.value(null);return this},hide:function(C){this.$.hide();return this},hidden:function(C){return this.$.hasClass("hidden")},load:function(D,I){var G=0;var F=function(J){G+=1;if(G==D.length&&typeof(I)=="function"){I()}J.target.removeEventListener("load",F)};for(var C in D){var E=D[C];var H=document.createElement("script");H.type="text/javascript";H.src=E;H.addEventListener("load",F);document.body.appendChild(H)}},next:function(C){return c.call(this,C)},previous:function(C){return c.call(this,C,true)},select:function(D){switch(D){case false:case undefined:var C=this.parent;if(C!==undefined&&!(C.isMultiple)){C.deselect(true)}this.$.addClass("selected");return this;case true:children=this.toArray();while(D=children.shift()){D.select()}return D;default:D=d.call(this,D);if(D!==false){return D.select()}return D}},selected:function(C){if(C===true){return w.call(this,function(D){return D.selected()})}return this.$.hasClass("selected")},show:function(){this.$.show();return this},swap:function(G,F){var I=a.call(this,G),H=a.call(this,F);if((I>-1)&&(H>-1)){this[I]=h.call(this,H,1,this[I]).pop();var D=G.$[0];var C=F.$[0];var E=D.parentNode.insertBefore(document.createTextNode(""),D);C.parentNode.insertBefore(D,C);E.parentNode.insertBefore(C,E);E.parentNode.removeChild(E);return[I,H]}return false},toggle:function(H,G){var F,J,E=this[H],D=this[G];if(typeof E!=="function"){return false}if(arguments.length===1&&E.hasOwnProperty("toggle")){return E.toggle.call(this)}if(typeof D!=="function"){return false}var I=["","toggle",H,G].join("_"),C=this[I]=!(this[I]);if(C===true){F=E,J=H}else{F=D,J=G}F.call(this);return J},unbind:function(C){this.$.unbind(C)},update:function(G){if(G instanceof Array){if(this.isReseter){this.empty()}for(var I=0;I<G.length;I++){var H=G[I],J=H.template||0,C=H.name,D;delete H.template;delete H.name;if(!this.isAppender&&this.hasOwnProperty(I)){D=this[I]}else{var E=this.template[J].clone();D=this.attach(E,C);this.$.append(D.$)}D.update(H)}}else{if(G instanceof Object){for(var K in G){var H=G[K];var D=this[K];var L=K.match(/^([^\.]+)\.(.+)$/);if(L!==null){K=L[1];D=this[L[1]];var F={};F[L[2]]=H;H=F}if(D instanceof Function){D.call(this,H)}else{if(this.hasOwnProperty(K)){if(D instanceof t){D.update(H)}else{this[K]=H}}else{if(!/^\$/.test(K)){this.$.attr(K,H)}}}}}else{this.value(G)}}},value:function(C){return this.$.html(C)},addClass:function(C){this.$.addClass(C)},removeClass:function(C){this.$.removeClass(C)}}),y=Array.prototype,i=function(C){return C.attr("data-jsb-name")||C.attr("id")||C.attr("name")},w=y.filter,a=y.indexOf,x=y.pop,v=y.push,k=y.shift,f=y.slice,h=y.splice,r=y.toString,q=function(){return this.replace(/^[a-z]/,function(C){return C.toUpperCase()})},p=function(E){var C=f.call(E.children(),0);while(child=C.shift()){var D=t.$(child);if(D.attr("data-jsb-class")){this.attach(D)}else{p.call(this,D)}}},o=function(){var C=this.caller;if(typeof C==="object"){return C.isContext?C:C.context}return this},d=function(C){switch(typeof C){case"string":case"number":if(!this.hasOwnProperty(C)){return false}return this[C];case"object":if(a.call(this,C)<0){return false}return C;default:return false}},c=function(E,J){if(!E){var L=this.parent;E=this;if(!L){L=this,E=true}return c.call(L,E,J)}var F=this.length,C="pop",D=F-1,K=1,H=0;if(J===true){C="shift",D=0,K=-1,H=F-1}if(E===true){switch(F){case 0:return false;case 1:E=this[0];return E.selected()?false:E}var G=this.selected(true);if(G.length===0){return this[H]}E=G[C]()}var I=a.call(this,E);if(I===D){return false}return this[I+K]},u=function(){this.root=e.call(this);this.context=o.call(this);var C=this.caller;while(typeof C==="object"&&C.isTransparent){C=C.parent}this.parent=C},z=function(D){if(!D){return false}D=D.split(/\./);var C=this;var E;while(E=D.shift()){if(!C.hasOwnProperty(E)){return false}C=C[E]}return C},e=function(){var C=this.caller;if(typeof C==="object"){return C.root||C}return this},g=function(){var C=this.selected()?"deselect":"select";this[C]();return C},s=function(){var D=this.$.attr("data-jsb-type");if(D===undefined){return false}var C=D.split(" ");while(D=C.shift()){var E="is"+q.call(D);this[E]=true}return true};j.JsB=t})(window);(function(b){var a=my.Class(b.JsB,{constructor:function(d,c){a.Super.call(this,d,c);this.isRTL=this.isIE8=this.isIE9=this.isIE10=false;this._init(d)},_init:function(c){if($("body").css("direction")==="rtl"){this.isRTL=true}this.isIE8=!!navigator.userAgent.match(/MSIE 8.0/);this.isIE9=!!navigator.userAgent.match(/MSIE 9.0/);this.isIE10=!!navigator.userAgent.match(/MSIE 10.0/);if(this.isIE10){$("html").addClass("ie10")}if(this.isIE10||this.isIE9||this.isIE8){$("html").addClass("ie")}},blockUI:function(e,c){c=$.extend(true,{},c);var d="";if(c.animate){d='<div class="loading-message '+(c.boxed?"loading-message-boxed":"")+'"><div class="block-spinner-bar"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div>'}else{if(c.iconOnly){d='<div class="loading-message '+(c.boxed?"loading-message-boxed":"")+'"><img src="/img/loading-spinner-grey.gif" align=""></div>'}else{if(c.textOnly){d='<div class="loading-message '+(c.boxed?"loading-message-boxed":"")+'"><span>&nbsp;&nbsp;'+(c.message?c.message:"LOADING...")+"</span></div>"}else{d='<div class="loading-message '+(c.boxed?"loading-message-boxed":"")+'"><img src="/img/loading-spinner-grey.gif" align=""><span>&nbsp;&nbsp;'+(c.message?c.message:"LOADING...")+"</span></div>"}}}if(e.$.height()<=($(b).height())){c.centerY=true}e.$.block({message:d,baseZ:c.zIndex?c.zIndex:1000,centerY:c.centerY!==undefined?c.centerY:false,css:{top:"10%",border:"0",padding:"0",backgroundColor:"none"},overlayCSS:{backgroundColor:c.overlayColor?c.overlayColor:"#555",opacity:c.boxed?0.05:0.1,cursor:"wait"}})},unblockUI:function(c){c.$.unblock({onUnblock:function(){c.$.css("position","");c.$.css("zoom","")}})},notification:function(c,d){switch(c){case"success":toastr.success(d);break;case"error":toastr.error(d);break}},getResponsiveBreakpoint:function(c){var d={xs:480,sm:768,md:992,lg:1200};return d[c]?d[c]:0},getViewPort:function(){var d=b,c="inner";if(!("innerWidth" in b)){c="client";d=document.documentElement||document.body}return{width:d[c+"Width"],height:d[c+"Height"]}},scrollTo:function(d,c){var e=(d&&d.size()>0)?d.offset().top:0;if(d){if($("body").hasClass("page-header-fixed")){e=e-$(".page-header").height()}else{if($("body").hasClass("page-header-top-fixed")){e=e-$(".page-header-top").height()}else{if($("body").hasClass("page-header-menu-fixed")){e=e-$(".page-header-menu").height()}}}e=e+(c?c:-1*d.height())}$("html,body").animate({scrollTop:e},"slow")}});b.App=a})(window);(function(l){var f=my.Class(l,{constructor:function(v,t){f.Super.call(this,v,t);this.maxlength=this.$.attr("maxlength");if(this.maxlength!=undefined){this.$.maxlength({limitReachedClass:"label label-danger",alwaysShow:true})}var u=this;this.root.queue.push(function(){$("[data-parent="+u.parent.name+"]").each(function(){if(!$(this).attr("data-parent-values").includes(u.$.val())){$(this).addClass("hidden")}else{$(this).removeClass("hidden")}})})},change:function(u){var t=this;$("[data-parent="+this.parent.name+"]").each(function(){if(!$(this).attr("data-parent-values").includes(t.$.val())){$(this).addClass("hidden")}else{$(this).removeClass("hidden")}});return false},enable:function(){this.$.prop("disabled",false)},disable:function(){this.$.prop("disabled",true)}}),n=my.Class(f,{constructor:function(u,t){n.Super.call(this,u,t);this.placeholder=this.$.attr("placeholder")},value:function(t){if(t){this.$.val(t)}return this.$.val()},reset:function(){this.$.val("")}}),s=my.Class(n,{constructor:function(u,t){s.Super.call(this,u,t)}}),a=my.Class(n,{constructor:function(v,t){a.Super.call(this,v,t);var u=this;u.initialized=false;this.root.queue.push(function(){u.$.keydown(function(){if(u.initialized===false){u.$.pwstrength({ui:{showVerdictsInsideProgressBar:false,showVerdicts:false}});u.$.pwstrength("addRule","myRule",function(w,x,y){return x.match(/[a-z].[0-9]/)&&y},10,true);u.initialized=true}})})}}),q=my.Class(n,{constructor:function(u,t){q.Super.call(this,u,t);this.enabled=(this.value()!=undefined)},reset:function(){this.$.attr("checked",this.enabled)},value:function(){return this.$.attr("checked")}}),g=my.Class(n,{constructor:function(v,t){g.Super.call(this,v,t);var u=this;this.root.queue.push(function(){u.$.TouchSpin({initval:0,min:0,max:200})})},reset:function(){this.$.val(0)}}),d=my.Class(n,{constructor:function(u,t){d.Super.call(this,u,t);this.$.tagsinput({trimValue:true})}}),o=my.Class(n,{constructor:function(v,t){o.Super.call(this,v,t);var u=this;this.$.fileupload({url:"/media/upload.json",dataType:"json",acceptFileTypes:/(\.|\/)(gif|jpe?g|png|mp4|pdf)$/i,formData:{element:this.$.attr("id")},start:function(w){u.parent.$progress.show();u.parent.$error.value(null)},always:function(x,w){u.parent.$progress.hide();u.parent.$progress.$bar.$.css({width:"0%"})},progressall:function(y,x){var w=parseInt(x.loaded/x.total*100,10);u.parent.$progress.$bar.$.css({width:w+"%"})},done:function(x,w){if(w.result.result==1){u.parent.$files.update({"$filename":w.result.filename,"$open":{href:w.result.url}})}else{u.parent.$error.value(w.result.error)}}})}}),j=my.Class(f,{constructor:function(u,t){j.Super.call(this,u,t)}}),h=my.Class(f,{constructor:function(u,t){h.Super.call(this,u,t);this.bind("change")},value:function(t){return(t)?this.$.val(t):this.$.val()},reset:function(){this.$.val("")},text:function(){return $("option:selected",this.$).text()},addOption:function(t){if(this.$.find('option[value="'+t.value+'"]').length>0){this.$.find('option[value="'+t.value+'"]').prop("selected",true);return}this.$.append($("<option></option>").attr("value",t.value).text(t.text).prop("selected",true))}}),i=my.Class(f,{constructor:function(v,t){i.Super.call(this,v,t);var u=this;this.root.queue.push(function(){u.$.select2({placeholder:u.$.attr("placeholder"),allowClear:true,multiple:u.isMultiple,formatResult:u.format,formatSelection:u.format,width:null,theme:"bootstrap"}).on("change",function(w){u.change(w)})})},format:function(t){return},reset:function(){this.$.select2("val","")}}),r=my.Class(i,{constructor:function(u,t){r.Super.call(this,u,t)},format:function(t){return t.text}}),c=my.Class(i,{constructor:function(u,t){l.FLAGS_PATH=jQuery(u).attr("data-flags-path");c.Super.call(this,u,t)},format:function(t){if(!t.id){return t.text}return"<img class='flag' src='"+l.FLAGS_PATH+t.id.toLowerCase()+".png'/>&nbsp;&nbsp;"+t.text}}),e=my.Class(n,{constructor:function(v,t){e.Super.call(this,v,t);var u=this;this.root.queue.push(function(){u.$.find(">:first-child").datetimepicker({autoclose:true,todayBtn:true,minuteStep:10,weekStart:1,todayHighlight:true,language:""+l.APP_LANGUAGE+""})})}}),p=my.Class(n,{constructor:function(v,t){p.Super.call(this,v,t);this.format=this.$.attr("data-date-format")||"YYYY-MM-DD";this.startDate=this.$.attr("data-start-date")||new Date(new Date().getFullYear(),0,1);this.endDate=this.$.attr("data-end-date")||new Date();var u=this;this.root.queue.push(function(){u.$.daterangepicker({startDate:u.startDate,endDate:u.endDate,maxDate:u.endDate,showDropdowns:true,timePicker:false,timePickerIncrement:1,buttonClasses:["btn green-haze"],cancelClass:"default",separator:"  ",locale:{applyLabel:"Aplicar",format:u.format,fromLabel:"De",toLabel:"Até",daysOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],firstDay:1}},function(y,w){$("#dashboard-report-range span").html(y.format(u.format)+" / "+w.format(u.format));var x=t.toArray();while(widget=x.shift()){if((widget.$reload!==undefined)){widget.$reload.click()}}t.$visits.$body.$chart.reload();t.$statistics.reload()});$("#dashboard-report-range span").html(u.formatDate(u.startDate)+" / "+u.formatDate(u.endDate));$("#dashboard-report-range").show()})},formatDate:function(u){var x=new Date(u),w=""+(x.getMonth()+1),t=""+x.getDate(),v=x.getFullYear();if(w.length<2){w="0"+w}if(t.length<2){t="0"+t}return[v,w,t].join("-")},value:function(){return this.$.find("span").text()}}),m=my.Class(n,{constructor:function(v,t){m.Super.call(this,v,t);this.format=this.$.attr("data-date-format");this.separator=this.$.attr("data-separator")||"/";var u=this;this.root.queue.push(function(){u.$.find(">:first-child").daterangepicker({format:u.format,separator:" "+u.separator+" ",locale:{applyLabel:"Aplicar",format:u.format,fromLabel:"De",toLabel:"Até",daysOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],firstDay:1}},function(w,x){u.$field.$.val(w.format(u.format)+" "+u.separator+" "+x.format(u.format))})})}}),k=my.Class(n,{constructor:function(v,t){k.Super.call(this,v,t);var u=this;this.root.queue.push(function(){u.$.iconpicker({hideOnSelect:true})})}}),b=my.Class(l,{constructor:function(u,t){b.Super.call(this,u,t);this.bind("click")},click:function(v,t){var u=this;$.post(u.$.attr("data-url"),{username:u.parent.$field.value()},function(w){},"json");return false}});l.object("Input",n);l.object("Password",a);l.object("CheckBox",q);l.object("Select",h);l.object("Select2",r);l.object("Textarea",j);l.object("Spinner",g);l.object("DateTime",e);l.object("DateRange",p);l.object("DateRangeInput",m);l.object("Tag",d);l.object("Upload",o);l.object("Country",c);l.object("IconPicker",k);l.object("Email",s);l.object("Username",b)})(JsB);(function(d){var b=my.Class(d,{constructor:function(g,e){b.Super.call(this,g,e);this.fields=[];this.action=this.$.attr("action");this.method=this.$.attr("method")||"post";var f=this;this.root.queue.push(function(){f.fields=f.$fields.toArray()})},submit:function(e){e.preventDefault();this.$.submit()},redirect:function(e){setTimeout(function(){window.location=e.url},e.duration||0)},disable:function(){for(var e in this.fields){var f=this.fields[e];if(f.$field){f.$field.disable()}}},enable:function(){for(var e in this.fields){var f=this.fields[e];if(f.$field){f.$field.enable()}}},show_errors:function(h){if(typeof(h)=="object"){for(var e in this.fields){var g=this.fields[e];if(g.$error===undefined){continue}var f=h[g.name];if(f!==undefined){g.$.addClass("has-error");g.$error.update(f)}else{g.$.removeClass("has-error");g.$error.update("")}}}},clean_errors:function(){for(var e in this.fields){var f=this.fields[e];if(f.$error===undefined){continue}f.$.removeClass("has-error");f.$error.update("")}},reset:function(){for(var e in this.fields){var f=this.fields[e];f.$.removeClass("has-error");if(f.$error){f.$error.value(null)}if(f.$field){f=f.$field;if(typeof f.reset==="function"){f.reset(true)}else{f.$.val("")}}}},notification:function(e){app.notification(e[0],e[1])}}),a=my.Class(b,{constructor:function(f,e){a.Super.call(this,f,e);this.async=true},submit:function(g,e){var f=this,h=this.$.serializeArray();if(this._request){this._request.abort()}if(e!=undefined&&typeof e=="object"){h.push(e)}this._request=$.ajax({type:this.method,url:this.action,async:this.async,data:h,dataType:"json",beforeSend:function(){f._beforeSend()},error:function(i,j){f._onError(i,j)},complete:function(){f._onComplete()},success:function(i){f._request=null;f._onSuccess(i)}})},show_errors:function(e){a.Super.prototype.show_errors.call(this,e)},_beforeSend:function(){if(this.$button!==undefined){this.$button.$.button("loading")}this.disable()},_onComplete:function(){if(this.$button!==undefined){this.$button.$.button("reset")}this.enable()},_onError:function(e,f){},_onSuccess:function(e){this.update(e);var f=this.$.offset()["top"];$("html, body").animate({scrollTop:f-100},"slow")}}),c=my.Class(d,{constructor:function(f,e){c.Super.call(this,f,e);this.name="button";this.bind("click")},click:function(f,e){this.context.submit(f);return false}});d.object("App.Form",b);d.object("App.Form.Ajax",a);d.object("App.Form.Ajax.Submit",c)})(JsB);(function(g){var c=my.Class(g,{constructor:function(j,h){c.Super.call(this,j,h);this.offset=this.$.attr("data-jsb-offset")||250;this.duration=this.$.attr("data-jsb-duration")||500;this.bind("click");var i=this;$(window).scroll(function(){if($(this).scrollTop()>i.offset){i.$.fadeIn(i.duration)}else{i.$.fadeOut(i.duration)}})},click:function(h){h.preventDefault();this.root.$.animate({scrollTop:0},this.duration);return false}}),a=my.Class(g,{constructor:function(i,h){a.Super.call(this,i,h);this.bind("click")},click:function(h){this.selected()?this.deselect():this.select();return false},select:function(){a.Super.prototype.select.call(this);this.$.addClass("off");this.parent.$panel.show()},deselect:function(){a.Super.prototype.deselect.call(this);this.$.removeClass("off");this.parent.$panel.hide()}}),b=my.Class(g,{constructor:function(i,h){b.Super.call(this,i,h);this.iconClass=this.$.attr("class")},value:function(h){if(h){this.$.removeClass(this.iconClass).addClass("fa fa-warning");this.$.attr("data-original-title",h).tooltip({container:"body"})}else{this.$.removeClass("fa fa-warning").addClass(this.iconClass);this.$.attr("data-original-title","")}}}),e=my.Class(g,{constructor:function(i,h){e.Super.call(this,i,h);this.$.tooltip({container:"body",title:this.$.attr("title")})}}),d=my.Class(g,{constructor:function(j,h){d.Super.call(this,j,h);var i=this;this.root.queue.push(function(){if($.cookie&&$.cookie("sidebar_closed")==="1"&&app.getViewPort().width>=app.getResponsiveBreakpoint("md")){this.close()}})},isClosed:function(){return(this.root.$.hasClass("page-sidebar-closed"))},open:function(){this.root.$.removeClass("page-sidebar-closed");this.$.removeClass("page-sidebar-menu-closed");if($.cookie){$.cookie("sidebar_closed","0")}},close:function(){this.root.$.addClass("page-sidebar-closed");this.$.addClass("page-sidebar-menu-closed");if($.cookie){$.cookie("sidebar_closed","1")}},toogle:function(){if(this.isClosed()){this.open()}else{this.close()}}}),f=my.Class(g,{constructor:function(i,h){f.Super.call(this,i,h);this.bind("click")},click:function(h){h.preventDefault();this.root.$sidebar.toogle();$(window).trigger("resize")}});g.object("Top",c);g.object("Icon",b);g.object("Tooltip",e);g.object("App.Sidebar",d);g.object("App.Toogle",f);g.object("App.Search.Button",a)})(JsB);(function(f){var a=my.Class(f,{constructor:function(i,g){a.Super.call(this,i,g);this.url=this.$.attr("data-url");this.metric=this.$.attr("data-metric");this.profile=this.$.attr("data-profile");this.options={grid:{hoverable:true,clickable:true,tickColor:"#eee",borderColor:"#eee",borderWidth:1},xaxis:{tickLength:0,tickDecimals:0,mode:"categories",min:0,font:{lineHeight:14,style:"normal",variant:"small-caps",color:"#6F7B8A"}},yaxis:{ticks:5,tickDecimals:0,tickColor:"#eee",font:{lineHeight:14,style:"normal",variant:"small-caps",color:"#6F7B8A"}}};var h=this;this.root.queue.push(function(){h.reload()})},reload:function(g){var h=this,i={metric:this.metric,profile:this.profile,date:this.root.$dashboard.$daterange.value()};$.ajax({type:"POST",url:this.url,data:i,dataType:"json",beforeSend:function(){h.root.blockUI(h.context,{animate:true})},error:function(j,k){h.root.unblockUI(h.context)},complete:function(){h.root.unblockUI(h.context)},success:function(k){$.plot(h.$,[{data:k,lines:{fill:0.6,lineWidth:0},color:["#f89f9f"]},{data:k,points:{show:true,fill:true,radius:5,fillColor:"#f89f9f",lineWidth:3},color:"#fff",shadowSize:0}],h.options);var j=null;h.$.bind("plothover",function(n,p,m){$("#x").text(p.x.toFixed(2));$("#y").text(p.y.toFixed(2));if(m){if(j!=m.dataIndex){j=m.dataIndex;$("#tooltip").remove();var l=m.datapoint[0].toFixed(2),o=m.datapoint[1].toFixed(2);h.show_tooltip(m.pageX,m.pageY,m.datapoint[0],m.datapoint[1])}}else{$("#tooltip").remove();j=null}})}})},show_tooltip:function(g,j,i,h){$('<div id="tooltip" class="chart-tooltip">'+h+"</div>").css({position:"absolute",display:"none",top:j-40,left:g-40,border:"0px solid #ccc",padding:"2px 6px","background-color":"#fff"}).appendTo("body").fadeIn(200)}}),c=my.Class(f,{constructor:function(h,g){c.Super.call(this,h,g);this.bind("click")},click:function(){this.context.$body.$chart.metric=this.$.find("input").val();this.context.$body.$chart.reload()}}),d=my.Class(f,{constructor:function(h,g){d.Super.call(this,h,g);this.bind("click")},click:function(){this.context.$body.$chart.profile=this.name;this.context.$body.$chart.reload()}}),b=my.Class(f,{constructor:function(i,g){b.Super.call(this,i,g);var h=this;this.url=this.$.attr("data-url");this.metric=this.$.attr("data-metric");this.profile=this.$.attr("data-profile");this.root.queue.push(function(){h.reload()})},reload:function(){var g=this,h={metric:this.metric,profile:this.profile,date:this.root.$dashboard.$daterange.value()};$.ajax({type:"POST",url:this.url,data:h,dataType:"json",beforeSend:function(){g.root.blockUI(g.context,{animate:true})},error:function(i,j){g.root.unblockUI(g.context)},complete:function(){g.root.unblockUI(g.context)},success:function(k){var j=g.toArray();for(var i in j){var l=j[i];if(l!=undefined){l.update(k[i]["value"],k[i]["text"])}}}})}}),e=my.Class(f,{constructor:function(i,g){e.Super.call(this,i,g);var h=this;this.root.queue.push(function(){h.$.easyPieChart({animate:1000,size:75,lineWidth:3,barColor:h.$.attr("data-color")})})},update:function(g,h){this.$.data("easyPieChart").update(g);$("span",this.$).text(g);this.$.parent().find("a.title").text(h)}});f.object("App.Chart",a);f.object("App.Chart.Metric",c);f.object("App.Chart.Profile",d);f.object("App.PieChart",b);f.object("App.PieChart.Object",e)})(JsB);(function(c){var b=my.Class(c,{constructor:function(f,d){b.Super.call(this,f,d);this.table=null;this.source=this.$.attr("data-source")||null;var e=this;this.root.queue.push(function(){sorting=[];if(e["$selectAll"]!==undefined){sorting.push(0)}if(e["$actions"]!==undefined){sorting.push(e.get_columns_number())}e.table=e.$.dataTable({aaSorting:[],sServerMethod:"POST",sAjaxSource:e.source,pagingType:"bootstrap_full_number",bProcessing:true,bServerSide:true,bAutoWidth:false,bDeferRender:true,bStateSave:true,iDisplayLength:10,language:{url:"/datatables.json"},aoColumnDefs:[{bSortable:false,aTargets:sorting}],fnDrawCallback:function(g){d.$.find(".dataTables_filter input").addClass("form-control input-small input-inline");d.$.find(".dataTables_length select").addClass("form-control input-xsmall")},fnRowCallback:function(i,h,g){var j=$(i).attr("id");if(e["$"+j]!==undefined){e.dettach(e["$"+j])}e.attach(i)}});e.table.find(".group-checkable").change(function(){var h=$('tbody > tr > td:nth-child(1) input[type="checkbox"]',this.$);var g=jQuery(this).is(":checked");jQuery(h).each(function(){if(g){$(this).prop("checked",true);$(this).parents("tr").addClass("active")}else{$(this).prop("checked",false);$(this).parents("tr").removeClass("active")}})});e.table.on("change","tbody tr .checkboxes",function(){$(this).parents("tr").toggleClass("active")})})},reload:function(){var d=this.parent;app.blockUI(d,{animate:true});this.table._fnAjaxUpdate({sEcho:this.table.sEcho});var e=$('thead > tr > th:nth-child(1) input[type="checkbox"]');if(e!==undefined){$(e).prop("checked",false)}window.setTimeout(function(){app.unblockUI(d)},1000)},get_columns_number:function(){return this.$.find("thead>tr:first th").lenght-1},delete_row:function(d){var f=this,e=this.context.parent;$.ajax({type:"GET",url:d,dataType:"json",beforeSend:function(){app.blockUI(e,{animate:true})},error:function(g,h){alert(h)},complete:function(){app.unblockUI(e)},success:function(g){f.table._fnAjaxUpdate();f.update(g)}})},notification:function(d){app.notification(d[0],d[1])},getRowsSelected:function(){var d=[];$('tbody > tr > td:nth-child(1) input[type="checkbox"]:checked',this.$).each(function(){d.push({name:$(this).attr("name"),value:$(this).val(),filename:$(this).attr("filename"),url:$(this).attr("data-url")})});return d}}),a=my.Class(c,{constructor:function(e,d){a.Super.call(this,e,d);this.bind("click")},click:function(){var d=this;bootbox.confirm(this.$.attr("data-text"),function(e){if(e){d.context.delete_row(d.$.attr("data-url"))}});return false}});c.object("App.DataTable",b);c.object("App.DataTable.Delete",a)})(JsB);(function(b){var a=my.Class(b,{constructor:function(d,c){a.Super.call(this,d,c);this.$.fancybox({groupAttr:"data-rel",prevEffect:"none",nextEffect:"none",closeBtn:true,helpers:{title:{type:"inside"}}})}});b.object("App.Fancybox",a)})(JsB);(function(d){var a=my.Class(d.object("Input"),{constructor:function(n,l){a.Super.call(this,n,l);this.name="category";this.min=2;this.delay=0;this.timeout=null;var m=this;this.context.bind("mouseleave",function(){m.context.$results.hide()});this.bind("focus",function(){if(this.value()!=""){m.context.$results.show()}});this.bind("keydown")},keydown:function(n){var m=this,l=n.keyCode,o=this.value();switch(l){case 38:n.preventDefault();m.context.$results.previous();break;case 40:n.preventDefault();m.context.$results.next();break;default:clearTimeout(this.timeout);this.timeout=setTimeout(function(){m.search()},this.delay);break}},search:function(){var n=this.value().replace(/[\\]+|[\/]+/g,""),m=n.length,l=this.min;if(m>=l){this._load()}else{this.context.$results.hide()}return},_load:function(){var l=this;$.ajax({type:"POST",url:this.$.attr("data-jsb-url"),data:{q:this.value()},dataType:"json",beforeSend:function(){l.$.addClass("spinner")},complete:function(){l.$.removeClass("spinner")},error:function(){l.$.removeClass("spinner")},success:function(m){l.context.$results.update(m);l.context.$results.$.show()}})}}),b=my.Class(d,{constructor:function(n,l){b.Super.call(this,n,l);this.name="results";var m=this.context.$category.$.outerWidth();this.$.width(m)},next:function(){var m=this.selected(true)[0],l=m?m.next():0;if(!l&&this.length>0){l=0}this.select(l)},previous:function(){var l=this.selected(true)[0],m=l?l.previous():this.length-1;if(!m&&this.length>0){m=this.length-1}this.select(m)}}),i=my.Class(d.object("Input"),{constructor:function(m,l){i.Super.call(this,m,l);this.name="field"},update:function(){var n=[],m=this.context.$container.toArray();var l;for(l in m){var o=m[l];if(typeof(o)==="object"&&this.isPrimary){n.push({value:o.name,primary:o.selected()})}else{if(typeof(o)==="object"){n.push(o.name)}}}if(n.length<=0){this.$.val("")}else{this.value(n)}},value:function(l){if(l&&l.length>0){i.Super.prototype.value.call(this,JSON.stringify(l))}else{l=i.Super.prototype.value.call(this);if(l){return JSON.parse(l)}}return 1},reset:function(l){i.Super.prototype.reset.call(this);this.context.$category.reset();this.context.$results.hide();if(l){this.context.$container.empty()}}}),e=my.Class(d,{constructor:function(m,l){e.Super.call(this,m,l);this.bind("mouseover");this.bind("click")},mouseover:function(l){l.preventDefault;this.parent.select(this)},click:function(l){l.preventDefault();this.context.$container.update({name:this.name,"$name":this.$name.$.text(),"$path":this.$path.$.text()});this.context.$category.reset();this.context.$results.hide();return false}}),f=my.Class(d,{constructor:function(n,l){f.Super.call(this,n,l);var m=this;this.name="container";this.root.queue.push(function(){m.update(m.context.$field.value())})},update:function(m){var l=[];if(m instanceof Array){l=m}else{if(typeof(m)==="object"){l.push(m)}else{return}}f.Super.prototype.update.call(this,l);this.context.$field.update();this.show()},dettach:function(l){f.Super.prototype.dettach.call(this,l);this.context.$field.update();if(this.length==0){this.hide()}},swap:function(m,l){f.Super.prototype.swap.call(this,m,l);this.context.$field.update()}}),g=my.Class(d,{constructor:function(m,l){g.Super.call(this,m,l)},select:function(){this.$primary.$.children("i").removeClass("glyphicon-star-empty");this.$primary.$.children("i").addClass("glyphicon-star");g.Super.prototype.select.call(this)},deselect:function(){this.$primary.$.children("i").removeClass("glyphicon-star");this.$primary.$.children("i").addClass("glyphicon-star-empty");g.Super.prototype.deselect.call(this)}}),k=my.Class(d,{constructor:function(m,l){k.Super.call(this,m,l);this.name="delete";this.bind("click")},click:function(n){var m=this.parent,l=m.parent;l.dettach(m);return false}}),h=my.Class(d,{constructor:function(m,l){h.Super.call(this,m,l);this.name="up";this.bind("click")},click:function(n){var m=this.parent,l=m.previous();m.parent.swap(m,l);return false}}),c=my.Class(d,{constructor:function(m,l){c.Super.call(this,m,l);this.name="down";this.bind("click")},click:function(n){var m=this.parent,l=m.next();m.parent.swap(m,l);return false}}),j=my.Class(d,{constructor:function(m,l){c.Super.call(this,m,l);this.name="primary";this.bind("click")},click:function(l){if(this.parent.selected()){this.parent.parent.deselect(this.parent)}else{this.parent.parent.select(this.parent)}this.context.$field.update();return false}});d.object("App.Category.Selector",a);d.object("App.Category.Field",i);d.object("App.Category.Results",b);d.object("App.Category.Results.Item",e);d.object("App.Category.Container",f);d.object("App.Category.Container.Item",g);d.object("App.Category.Delete",k);d.object("App.Category.Up",h);d.object("App.Category.Down",c);d.object("App.Category.Primary",j)})(JsB);(function(e){var b=my.Class(e.object("Input"),{constructor:function(g,f){b.Super.call(this,g,f)},update:function(){var h=[],g=this.parent.$items.toArray();for(var f in g){var j=g[f],i={"$time":j.$time.$.text(),"$duration":j.$duration.$.text(),"$plan":j.$plan.$.text()};if(typeof(j)==="object"){if(this.isMultiple){h.push(i)}else{h=i}}}if(h.length<=0){this.$.val("")}else{this.value(h)}},value:function(f){if(f&&f.length>0){if(f instanceof Array){b.Super.prototype.value.call(this,JSON.stringify(f))}else{b.Super.prototype.value.call(this,f)}}else{f=b.Super.prototype.value.call(this);if(f){return JSON.parse(f)}}return 1},reset:function(){b.Super.prototype.reset.call(this);this.parent.$items.empty()}}),a=my.Class(e,{constructor:function(g,f){a.Super.call(this,g,f);this.bind("click")},click:function(f){f.preventDefault();this.context.$items.update({"$time":this.context.$time.value(),"$duration":this.context.$duration.value(),"$plan":this.context.$plan.value()});this.context.$time.value("");this.context.$duration.value("");this.context.$plan.value("");return false}}),d=my.Class(e,{constructor:function(h,f){d.Super.call(this,h,f);var g=this;this.root.queue.push(function(){g.update(g.parent.$field.value())})},update:function(g){var f=[];if(g instanceof Array){f=g}else{if(typeof(g)==="object"){f.push(g)}else{return}}d.Super.prototype.update.call(this,f);this.parent.$field.update()},dettach:function(f){d.Super.prototype.dettach.call(this,f);this.parent.$field.update()},swap:function(g,f){d.Super.prototype.swap.call(this,g,f);this.parent.$field.update();this[0].select()}}),c=my.Class(e,{constructor:function(g,f){c.Super.call(this,g,f);this.bind("click")},click:function(h){var g=this.parent,f=g.parent;f.dettach(g);return false}});Up=my.Class(e,{constructor:function(g,f){Up.Super.call(this,g,f);this.name="up";this.bind("click")},click:function(h){var g=this.parent,f=g.previous();g.parent.swap(g,f);return false}}),Down=my.Class(e,{constructor:function(g,f){Down.Super.call(this,g,f);this.name="down";this.bind("click")},click:function(h){var g=this.parent,f=g.next();g.parent.swap(g,f);return false}});e.object("App.Timeline.Field",b);e.object("App.Timeline.Save",a);e.object("App.Timeline.Items",d);e.object("App.Timeline.Items.Delete",c);e.object("App.Timeline.Up",Up);e.object("App.Timeline.Down",Down)})(JsB);(function(f){var b=my.Class(f.object("Input"),{constructor:function(h,g){b.Super.call(this,h,g)},update:function(){var i=[],h=this.parent.$files.toArray();for(var g in h){var k=h[g],j=k.$filename.$.text();if(typeof(k)==="object"){if(this.isMultiple){i.push(j)}else{i=j}}}if(i.length<=0){this.$.val("")}else{this.value(i)}},value:function(g){if(g&&g.length>0){if(g instanceof Array){b.Super.prototype.value.call(this,JSON.stringify(g))}else{b.Super.prototype.value.call(this,g)}}else{g=b.Super.prototype.value.call(this);if(g){return JSON.parse(g)}}return 1},reset:function(){b.Super.prototype.reset.call(this);this.parent.$files.empty()}}),d=my.Class(f,{constructor:function(h,g){d.Super.call(this,h,g);this.bind("click")},click:function(g){this.parent.$files[0].$delete.click()}}),c=my.Class(f,{constructor:function(h,g){c.Super.call(this,h,g)},show:function(){this.$.removeClass("display-hide")},hide:function(){this.$.addClass("display-hide")}}),a=my.Class(f,{constructor:function(i,g){a.Super.call(this,i,g);var h=this;this.root.queue.push(function(){h.update(h.parent.$field.value())})},update:function(h){var g=[];if(h instanceof Array){g=h}else{if(typeof(h)==="object"){g.push(h)}else{return}}a.Super.prototype.update.call(this,g);this.parent.$field.update()},dettach:function(g){a.Super.prototype.dettach.call(this,g);this.parent.$field.update()},swap:function(h,g){a.Super.prototype.swap.call(this,h,g);this.parent.$field.update();this[0].select()}}),e=my.Class(f,{constructor:function(h,g){e.Super.call(this,h,g);this.bind("click")},click:function(i){var h=this.parent,g=h.parent;g.dettach(h);return false}});Up=my.Class(f,{constructor:function(h,g){Up.Super.call(this,h,g);this.name="up";this.bind("click")},click:function(i){var h=this.parent,g=h.previous();h.parent.swap(h,g);return false}}),Down=my.Class(f,{constructor:function(h,g){Down.Super.call(this,h,g);this.name="down";this.bind("click")},click:function(i){var h=this.parent,g=h.next();h.parent.swap(h,g);return false}});f.object("App.Upload.Field",b);f.object("App.Upload.Delete",d);f.object("App.Upload.Progress",c);f.object("App.Upload.Files",a);f.object("App.Upload.Files.Delete",e);f.object("App.Upload.Up",Up);f.object("App.Upload.Down",Down)})(JsB);(function(b){var a=my.Class(b,{constructor:function(e,c){a.Super.call(this,e,c);var d=this;this.root.queue.push(function(){d.$.ckeditor(function(){},{language:b.APP_LANGUAGE,toolbarStartupExpanded:true,startupShowBorders:true,startupOutlineBlocks:true});CKEDITOR.on("instanceReady",function(f){f.editor.dataProcessor.htmlFilter.addRules({elements:{$:function(g){if(g.name=="img"){g.addClass("img-responsive");g.attributes.style="";if(!g.attributes.style){delete g.attributes.style}}if(g.name=="table"){g.addClass("table table-responsive");g.attributes.style="";if(!g.attributes.style){delete g.attributes.style}}}}})})})},ckeditor:function(){return this.$.ckeditorGet()},value:function(){return this.$.val()},disable:function(){return},enable:function(){return},update:function(c){this.ckeditor().setData(c)}});b.object("App.Wysiwyg",a)})(JsB);(function(d){var a=my.Class(d.object("App.Form.Ajax"),{constructor:function(g,e){a.Super.call(this,g,e);this.async=false;this.length=0;var f=this;this.root.queue.push(function(){f.$.bootstrapWizard({nextSelector:".button-next",previousSelector:".button-previous",onTabClick:function(j,h,i,k){return false},onPrevious:function(j,h,i){f.handle(j,h,i);f.previous(j,h,i)},onNext:function(j,h,i){if(f.next(j,h,i)){f.handle(j,h,i)}else{return false}},onTabShow:function(l,h,j){f.length=h.find("li").length;var k=j+1;var i=(k/f.length)*100;$(".progress-bar").css({width:i+"%"})}})})},handle:function(g,e,f){var h=e.find("li").length;var i=f+1;if(i>1){this.$previous.show()}else{this.$previous.hide()}if(i>=h){this.$next.hide();this.$button.show()}else{this.$next.show();this.$button.hide()}},next:function(g,e,f){this.hasErrors=false;this.submit(null,{name:"step",value:f});return(this.hasErrors==false)},_onSuccess:function(e){if(e.show_errors!==undefined){this.hasErrors=true}else{this.clean_errors()}this.update(e)},previous:function(g,e,f){this.clean_errors()}}),c=my.Class(d,{constructor:function(f,e){c.Super.call(this,f,e)},hide:function(){this.$.addClass("hide")},show:function(){this.$.removeClass("hide")}}),b=my.Class(d.object("App.Form.Ajax.Submit"),{constructor:function(f,e){b.Super.call(this,f,e)},hide:function(){this.$.addClass("hide")},show:function(){this.$.removeClass("hide")},click:function(f,e){this.context.submit(f,{name:"step",value:this.context.length});return false}});d.object("App.Form.Multistep",a);d.object("App.Form.Multistep.Navigation",c);d.object("App.Form.Multistep.Submit",b)})(JsB);(function(b){var a=my.Class(b,{constructor:function(e,c){a.Super.call(this,e,c);var d=this;this.caller=c;this.root.queue.push(function(){d.$.modal({show:false}).on("shown.bs.modal",function(f){d.show(f)})})},open:function(c){this.caller=c;this.$.modal("show")},show:function(c){return false},hide:function(c){this.$.modal("hide")}});b.object("App.Modal",a)})(JsB);(function(b){var a=my.Class(b,{constructor:function(e,c){a.Super.call(this,e,c);var d=this;this.root.queue.push(function(){d.$.pulsate({color:"#66bce6",repeat:15})})}});b.object("App.Notification.Pulsate",a)})(JsB);(function(b){var a=my.Class(b,{constructor:function(e,c){a.Super.call(this,e,c);var d=this;this.root.queue.push(function(){d.uploader=new plupload.Uploader({runtimes:"html5,flash,html4",browse_button:document.getElementById("tab_images_uploader_pickfiles"),container:document.getElementById("tab_images_uploader_container"),url:d.$.attr("data-jsb-url"),init:{PostInit:function(){$("#tab_images_uploader_filelist").html("");$("#tab_images_uploader_uploadfiles").click(function(){d.uploader.start();return false});$("#tab_images_uploader_filelist").on("click",".added-files .remove",function(){d.uploader.removeFile($(this).parent(".added-files").attr("id"));$(this).parent(".added-files").remove()})},FilesAdded:function(f,g){plupload.each(g,function(h){$("#tab_images_uploader_filelist").append('<div class="alert alert-warning added-files" id="uploaded_file_'+h.id+'">'+h.name+" ("+plupload.formatSize(h.size)+') <span class="status label label-info"></span>&nbsp;<a href="javascript:;" style="margin-top:-5px" class="remove pull-right btn btn-sm red"><i class="fa fa-times"></i> remover</a></div>')})},UploadProgress:function(f,g){$("#uploaded_file_"+g.id+" > .status").html(g.percent+"%")},FileUploaded:function(f,h,g){var g=$.parseJSON(g.response);if(g.result&&g.result==1){var i=g.id;$("#uploaded_file_"+h.id+" > .status").removeClass("label-info").addClass("label-success").html('<i class="fa fa-check"></i> Completo')}else{$("#uploaded_file_"+h.id+" > .status").removeClass("label-info").addClass("label-danger").html('<i class="fa fa-warning"></i> Falhou');app.notification(g[0],g[1])}},Error:function(f,g){app.notification(f,g)},UploadComplete:function(){$("#tab_images_uploader_filelist").html("");d.context.$reload.click()}}});d.uploader.init()})}});b.object("App.PlupUpload",a)})(JsB);(function(g){var d=my.Class(g,{constructor:function(i,h){d.Super.call(this,i,h)}}),f=my.Class(g,{constructor:function(i,h){f.Super.call(this,i,h);this.bind("click");this.$.tooltip({container:"body",title:this.$.attr("title")})},click:function(h){h.preventDefault();this.selected()?this.deselect():this.select();return false},select:function(){f.Super.prototype.select.call(this);this.$.removeClass("collapse").addClass("expand");this.context.$body.$.slideUp(200)},deselect:function(){f.Super.prototype.deselect.call(this);this.$.removeClass("expand").addClass("collapse");this.context.$body.$.slideDown(200)}}),b=my.Class(g,{constructor:function(i,h){b.Super.call(this,i,h);this.bind("click");this.$.tooltip({container:"body",title:this.$.attr("title")})},click:function(){if(this.context.$body["$table"]!==undefined){this.context.$body.$table.reload()}else{if(this.context.$body["$chart"]!==undefined){this.context.$body.$chart.reload()}else{this.context.$body.reload()}}return false}}),e=my.Class(g,{constructor:function(i,h){e.Super.call(this,i,h);this.bind("click");this.$.tooltip({container:"body",title:this.$.attr("title")})},click:function(h){h.preventDefault();this.root.dettach(this.context);return false}}),c=my.Class(g,{constructor:function(i,h){c.Super.call(this,i,h)},execute:function(h,k){var j=this,i=this.context.parent;$.ajax({type:"POST",url:h,dataType:"json",data:k,beforeSend:function(){app.blockUI(i)},error:function(){},complete:function(){app.unblockUI(i)},success:function(l){j.context.$body.$table.table._fnAjaxUpdate();j.update(l)}})},notification:function(h){app.notification(h[0],h[1])}}),a=my.Class(c,{constructor:function(i,h){a.Super.call(this,i,h);this.bind("click")},click:function(i){var h=this;bootbox.confirm(this.$.attr("data-text"),function(j){if(j){var l={};var k=h.context.context.$body.$table.getRowsSelected();if(k!==undefined){l.rows=k}h.context.execute(h.$.attr("data-url"),l)}});return false}});g.object("App.Portlet",d);g.object("App.Portlet.Collapse",f);g.object("App.Portlet.Reload",b);g.object("App.Portlet.Remove",e);g.object("App.Portlet.Actions",c);g.object("App.Portlet.Actions.Action",a)})(JsB);(function(b){var a=my.Class(b,{constructor:function(e,c){a.Super.call(this,e,c);this.height=0;this.alwaysVisible=false;var d=this;this.root.queue.push(function(){d.height=d.$.attr("data-height")?d.$.attr("data-height"):d.$.css("height");d.alwaysVisible=d.$.attr("data-always-visible")?true:false;d.$.slimScroll({size:"7px",color:"#a1b2bd",position:"right",railVisible:true,height:d.height,alwaysVisible:d.alwaysVisible})})},scrollTo:function(c){this.$.slimScroll({scrollTo:c+"px"})}});b.object("App.Scroll",a)})(JsB);(function(b){var a=my.Class(b,{constructor:function(e,c){a.Super.call(this,e,c);var d=this;this.root.queue.push(function(){d.$.jstree({core:{themes:{responsive:true},check_callback:true,data:{url:function(f){var g=(f.id!="#")?f.id:1;return"/categories/index/"+g+".json"},data:function(f){return{selected:d.$.attr("data-jsb-category")}}}},types:{"default":{icon:"fa fa-folder icon-state-warning icon-lg"}},plugins:["types"]}).on("loaded.jstree",function(f,g){}).delegate("a","click",function(f){window.location=f.currentTarget.href})})},reload:function(c){this.$.jstree("refresh",c)}});b.object("App.Tree",a)})(JsB);(function(c){var b=my.Class(c,{constructor:function(f,d){b.Super.call(this,f,d);this.url=this.$.attr("data-url");var e=this;this.root.queue.push(function(){e.reload()})},reload:function(){var d=this,e={date:this.root.$dashboard.$daterange.value()};$.ajax({type:"POST",url:this.url,dataType:"json",data:e,beforeSend:function(){},error:function(f,g){},complete:function(){},success:function(f){d.update(f)}})}}),a=my.Class(c,{constructor:function(e,d){a.Super.call(this,e,d)},update:function(d){this.$.attr("data-value",d);this.$.counterUp({delay:10,time:1000})}});c.object("App.DashBoard.Statistics",b);c.object("App.DashBoard.Statistics.Element",a)})(JsB);var Layout=function(){var e=function(){var l=$(".page-content");var m=$(".page-sidebar");var i=$("body");var h;if(i.hasClass("page-footer-fixed")===true&&i.hasClass("page-sidebar-fixed")===false){var n=app.getViewPort().height-$(".page-footer").outerHeight()-$(".page-header").outerHeight();if(l.height()<n){l.attr("style","min-height:"+n+"px")}}else{if(i.hasClass("page-sidebar-fixed")){h=d();if(i.hasClass("page-footer-fixed")===false){h=h-$(".page-footer").outerHeight()}}else{var j=$(".page-header").outerHeight();var k=$(".page-footer").outerHeight();if(app.getViewPort().width<app.getResponsiveBreakpoint("md")){h=app.getViewPort().height-j-k}else{h=m.height()+20}if((h+j+k)<=app.getViewPort().height){h=app.getViewPort().height-j-k}}l.attr("style","min-height:"+h+"px")}};var g=function(m,k){var j=location.hash.toLowerCase();var l=$(".page-sidebar-menu");if(m==="click"||m==="set"){k=$(k)}else{if(m==="match"){l.find("li > a").each(function(){var n=$(this).attr("href").toLowerCase();if(n.length>1&&j.substr(1,n.length-1)==n.substr(1)){k=$(this);return}})}}if(!k||k.length==0){return}if(k.attr("href").toLowerCase()==="javascript:;"||k.attr("href").toLowerCase()==="#"){return}var h=parseInt(l.data("slide-speed"));var i=l.data("keep-expanded")};var f=function(){$(".page-sidebar-menu").on("click","li > a.nav-toggle, li > a > span.nav-toggle",function(o){var n=$(this).closest(".nav-item").children(".nav-link");if(app.getViewPort().width>=app.getResponsiveBreakpoint("md")&&!$(".page-sidebar-menu").attr("data-initialized")&&$("body").hasClass("page-sidebar-closed")&&n.parent("li").parent(".page-sidebar-menu").length===1){return}var i=n.next().hasClass("sub-menu");if(app.getViewPort().width>=app.getResponsiveBreakpoint("md")&&n.parents(".page-sidebar-menu-hover-submenu").length===1){return}if(i===false){if(app.getViewPort().width<app.getResponsiveBreakpoint("md")&&$(".page-sidebar").hasClass("in")){$(".page-header .responsive-toggler").click()}return}var r=n.parent().parent();var p=n;var j=$(".page-sidebar-menu");var h=n.next();var q=j.data("auto-scroll");var l=parseInt(j.data("slide-speed"));var k=j.data("keep-expanded");if(!k){r.children("li.open").children("a").children(".arrow").removeClass("open");r.children("li.open").children(".sub-menu:not(.always-open)").slideUp(l);r.children("li.open").removeClass("open")}var m=-200;if(h.is(":visible")){$(".arrow",p).removeClass("open");p.parent().removeClass("open");h.slideUp(l,function(){if(q===true&&$("body").hasClass("page-sidebar-closed")===false){if($("body").hasClass("page-sidebar-fixed")){j.slimScroll({scrollTo:(p.position()).top})}else{app.scrollTo(p,m)}}e()})}else{if(i){$(".arrow",p).addClass("open");p.parent().addClass("open");h.slideDown(l,function(){if(q===true&&$("body").hasClass("page-sidebar-closed")===false){if($("body").hasClass("page-sidebar-fixed")){j.slimScroll({scrollTo:(p.position()).top})}else{app.scrollTo(p,m)}}e()})}}o.preventDefault()});$(document).on("click",".page-header-fixed-mobile .page-header .responsive-toggler",function(){App.scrollTop()});b();$(".page-sidebar").on("click",".sidebar-search .remove",function(h){h.preventDefault();$(".sidebar-search").removeClass("open")});$(".sidebar-search .submit").on("click",function(h){h.preventDefault();if($("body").hasClass("page-sidebar-closed")){if($(".sidebar-search").hasClass("open")===false){if($(".page-sidebar-fixed").length===1){$(".page-sidebar .sidebar-toggler").click()}$(".sidebar-search").addClass("open")}else{$(".sidebar-search").submit()}}else{$(".sidebar-search").submit()}});if($(".sidebar-search").length!==0){$(".sidebar-search .input-group").on("click",function(h){h.stopPropagation()});$("body").on("click",function(){if($(".sidebar-search").hasClass("open")){$(".sidebar-search").removeClass("open")}})}};var d=function(){var h=app.getViewPort().height-$(".page-header").outerHeight(true);if($("body").hasClass("page-footer-fixed")){h=h-$(".page-footer").outerHeight()}return h};var b=function(){var h=$("body");if(h.hasClass("page-sidebar-fixed")){$(".page-sidebar").on("mouseenter",function(){if(h.hasClass("page-sidebar-closed")){$(this).find(".page-sidebar-menu").removeClass("page-sidebar-menu-closed")}}).on("mouseleave",function(){if(h.hasClass("page-sidebar-closed")){$(this).find(".page-sidebar-menu").addClass("page-sidebar-menu-closed")}})}};var a=function(){$("body").on("shown.bs.tab",'a[data-toggle="tab"]',function(){e()})};var c=function(){$(".full-height-content").each(function(){var i=$(this);var h;h=app.getViewPort().height-$(".page-header").outerHeight(true)-$(".page-footer").outerHeight(true)-$(".page-title").outerHeight(true)-$(".page-bar").outerHeight(true);if(i.hasClass("portlet")){var j=i.find(".portlet-body");h=h-i.find(".portlet-title").outerHeight(true)-parseInt(i.find(".portlet-body").css("padding-top"))-parseInt(i.find(".portlet-body").css("padding-bottom"))-5;j.css("min-height",h)}else{i.css("min-height",h)}})};return{initSidebar:function(){f()},initContent:function(){c();a()},init:function(){this.initSidebar();this.initContent()},fixContentHeight:function(){e()},initFixedSidebar:function(){handleFixedSidebar()}}}();jQuery(document).ready(function(){Layout.init();Layout.fixContentHeight()});(function(d){var c=my.Class(d,{constructor:function(f,e){c.Super.call(this,f,e)},select:function(){c.Super.prototype.select.call(this);this.$login.$.slideUp(200);this.$forget.$.slideDown(200)},deselect:function(){c.Super.prototype.deselect.call(this);this.$forget.$.slideUp(200);this.$login.$.slideDown(200)}}),a=my.Class(d.object("App.Form.Ajax"),{constructor:function(f,e){a.Super.call(this,f,e)},_beforeSend:function(){this.$fields.$button.$.button("loading");this.disable()},_onComplete:function(){this.$fields.$button.$.button("reset");this.enable()}}),b=my.Class(d,{constructor:function(f,e){b.Super.call(this,f,e);this.bind("click")},click:function(f,e){this.root.$login.selected()?this.root.$login.deselect():this.root.$login.select();return false}});d.object("App.Login",c);d.object("App.Login.Navigation",b);d.object("App.Form.Ajax.Login",a)})(JsB);(function(c){var h=my.Class(c.object("App.Modal"),{constructor:function(n,m){h.Super.call(this,n,m);this.params={};this.values=[]},show:function(m){this.values=[];h.Super.prototype.show.call(this,m)},hide:function(o){this.params={};if(this.values instanceof Array){if(this.values.length){for(var m in this.values){var n=this.values[m];this.caller.parent.$files.update({"$filename":n.$title.$.attr("filename"),"$open":{href:n.$link.$.attr("href")}})}}}h.Super.prototype.hide.call(this,o)},open:function(m){this.$content.$assets.$form.clear();h.Super.prototype.open.call(this,m)}}),j=my.Class(c,{constructor:function(n,m){j.Super.call(this,n,m);this.bind("click")},click:function(m){m.preventDefault();if(this.isImage!==undefined&&this.isImage){app.$upload.params={name:"type",value:"image"}}if(this.isVideo!==undefined&&this.isVideo){app.$upload.params={name:"type",value:"video"}}return app.$upload.open(this)}}),l=my.Class(c,{constructor:function(n,m){l.Super.call(this,n,m);this.bind("click")},click:function(m){m.preventDefault();this.context.values=this.parent.$assets.$results.selected(true);return this.context.hide(m)}}),i=my.Class(c,{constructor:function(n,m){i.Super.call(this,n,m)}}),g=my.Class(c.object("App.Form.Ajax"),{constructor:function(n,m){g.Super.call(this,n,m);this.name="form"},submit:function(n,m){g.Super.prototype.submit.call(this,n,app.$upload.params)},_beforeSend:function(){this.context.$more.hide();g.Super.prototype._beforeSend.call(this)},_onSuccess:function(m){this.context.update(m)},addPage:function(m){this.$page.value(parseInt(this.$page.value())+1)},clear:function(){this.$fields.$search.$clear.click()},reset:function(){this.$page.value(1)}}),a=my.Class(c.object("Select2"),{constructor:function(n,m){a.Super.call(this,n,m)},change:function(m){this.context.submit(m);return false}}),e=my.Class(c.object("App.Form.Ajax.Submit"),{constructor:function(n,m){e.Super.call(this,n,m)},click:function(m){this.context.reset();this.context.parent.$results.empty();return e.Super.prototype.click.call(this,m)}}),d=my.Class(c.object("App.Form.Ajax.Submit"),{constructor:function(n,m){d.Super.call(this,n,m);this.name="clear"},click:function(m){this.context.reset();this.context.parent.$results.empty();this.context.$fields.$search.$field.reset();this.context.$fields.$orderBy.$field.reset();this.context.$fields.$orderDir.$field.reset();return d.Super.prototype.click.call(this,m)}}),b=my.Class(c,{constructor:function(n,m){b.Super.call(this,n,m)},update:function(o){var n=this.length,t=n>0?n-1:0;b.Super.prototype.update.call(this,o);if(this.length==0){return}var p=this.context.context.$content,q=this[t],r=this[this.length-1],m=r.$.offset().top+r.$.height(),u=q.$.offset().top+q.$.height(),s=p.$.scrollTop()+(m-u);if(t!=0){p.scrollTo(s)}}}),f=my.Class(c,{constructor:function(n,m){f.Super.call(this,n,m);this.bind("click")},click:function(m){m.preventDefault();this.toggle("select","deselect");return false},select:function(){f.Super.prototype.select.call(this.parent)},deselect:function(){f.Super.prototype.deselect.call(this.parent)}}),k=my.Class(c,{constructor:function(n,m){k.Super.call(this,n,m);this.bind("click")},click:function(m){this.context.$form.addPage();this.context.$form.submit();return false}});c.object("App.Modal.Assets",h);c.object("App.Modal.Assets.Open",j);c.object("App.Modal.Assets.Save",l);c.object("App.Modal.Assets.Form",g);c.object("App.Modal.Assets.Form.Select",a);c.object("App.Modal.Assets.Form.Search",e);c.object("App.Modal.Assets.Form.Clear",d);c.object("App.Modal.Assets.Results",b);c.object("App.Modal.Assets.Results.Item",f);c.object("App.Modal.Assets.Results.More",k)})(JsB);